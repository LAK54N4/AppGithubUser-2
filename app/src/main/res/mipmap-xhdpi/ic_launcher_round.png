package com.laksana.kemirimall

import com.google.android.gms.tasks.Task
import com.google.firebase.firestore.FirebaseFirestore
import com.google.firebase.firestore.QuerySnapshot


class DBqueries {
    val db: FirebaseFirestore = FirebaseFirestore.getInstance()

    fun getPostCategories() : Task<QuerySnapshot> {
        return db
            .collection("CATEGORIES")
            .orderBy("index")
            .get()
    }

}

/*
object DBqueries {

        val db: FirebaseFirestore = FirebaseFirestore.getInstance()

        val categoryModelList: ArrayList<CategoryModel> = ArrayList()

        val lists: ArrayList<ArrayList<HomePageModel>> = ArrayList()
        val loadCategoriesName: ArrayList<String> = ArrayList()


        fun loadCategories(adapterCategory: CategoryAdapter, context: Context?) {
            db.collection("CATEGORIES").orderBy("index").get()
                .addOnCompleteListener {
                    if (it.isSuccessful) {
                        for (documentSnapshot: QueryDocumentSnapshot in it.result!!) {
                            categoryModelList.add(
                                CategoryModel(
                                    documentSnapshot.get("icon").toString(),
                                    documentSnapshot.get("categoryName").toString()
                                )
                            )
                            adapterCategory.notifyDataSetChanged()
                        }
                        //adapterCategory.notifyDataSetChanged()
                    } else {
                        val error = it.exception!!.message
                        Toast.makeText(context, error, Toast.LENGTH_SHORT).show()
                    }
                }
        }

        fun loadFragmentData(adapter: HomePageAdapter, context: Context, index: Int, categoryName: String ) {
            db.collection("CATEGORIES")
                .document(categoryName.toUpperCase())
                .collection("TOP_DEALS").orderBy("index").get()
                .addOnCompleteListener {
                    if (it.isSuccessful) {
                        for (documentSnapshot: QueryDocumentSnapshot in it.result!!) {
                            if (documentSnapshot.get("view_type") as Long == 0L) {
                                val sliderModelList: ArrayList<SliderModel> = ArrayList()
                                val noOfBanners: Long = documentSnapshot.get("no_of_banners") as Long
                                for (x in 1 until noOfBanners + 1 step 1) {
                                    Log.d(
                                        "exist",
                                        "DocumentSnapshot data: ${documentSnapshot.get("banner_$x")} "
                                    )
                                    sliderModelList.add(
                                        SliderModel(
                                            documentSnapshot.get("banner_$x").toString(),
                                            documentSnapshot.get("banner_$x" + "_background").toString()
                                            //Log.d("exist", "DocumentSnapshot data: ${documentSnapshot.get("banner_$x")} ")
                                            //    .toString(),
                                            //Log.d("exist", "DocumentSnapshot data: ${documentSnapshot.get("banner_$x"+"_background")} ")
                                            //    .toString()
                                        )
                                    )
                                }
                                lists[index].add(HomePageModel(0, sliderModelList))
                            }
                            else if (documentSnapshot.get("view_type") as Long == 1L) {
                                lists[index].add(
                                    HomePageModel(1,
                                        documentSnapshot.get("strip_ad_banner").toString(),
                                        documentSnapshot.get("background").toString()
                                    )
                                )
                            }
                            else if (documentSnapshot.get("view_type") as Long == 2L) {

                                val viewAllProductList: ArrayList<WishlistModel> = ArrayList()
                                val horizontalProductScrollModeList: ArrayList<HorizontalProductScrollModel> = ArrayList()
                                //val numberOfProducts = documentSnapshot.get("number_of_product") as Long
                                //val numberOfProduct = documentSnapshot.get("no_of_products") as Long
                                val numberOfProducts = 3
                                for (x in 1 until numberOfProducts + 1 step 1) {
                                    //for (x in 1 until 4 + 1 step 1) {
                                    horizontalProductScrollModeList.add(
                                        HorizontalProductScrollModel(
                                            documentSnapshot.get("product_ID_$x").toString(),
                                            documentSnapshot.get("product_image_$x").toString(),
                                            documentSnapshot.get("product_title_$x").toString(),
                                            documentSnapshot.get("product_subtitle_$x").toString(),
                                            documentSnapshot.get("product_price_$x").toString(),
                                        )
                                    )
                                    viewAllProductList.add(
                                        WishlistModel(
                                            documentSnapshot.get("product_image_$x").toString(),
                                            documentSnapshot.get("product_full_title_$x").toString(),
                                            documentSnapshot.get("free_coupens_ $x") as Long,
                                            //Log.d("exist", "DocumentSnapshot data: ${documentSnapshot.get("free_coupens_$x")} ")
                                              //  .toLong(),
                                            documentSnapshot.get("average_rating_$x").toString(),
                                            //documentSnapshot.get("total_ratings_$x") as Long,
                                            Log.d("exist", "DocumentSnapshot data: ${documentSnapshot.get("total_ratings_$x")} ")
                                                .toLong(),
                                            documentSnapshot.get("product_price_$x").toString(),

                                            documentSnapshot.get("cutted_price_$x").toString(),
                                            true
                                            //documentSnapshot.get("COD_$x") as Boolean,
                                            //documentSnapshot.get("COD_$x") as Boolean,
                                            //Log.d("exist", "DocumentSnapshot data: ${documentSnapshot.get("COD_$x")} ") as Boolean,
                                        )
                                    )
                                }
                                lists[index].add(
                                    HomePageM